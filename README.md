wood_post ‚Äî Dev README

Telegram-–±–æ—Ç –Ω–∞ Go + PostgreSQL –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª—è–º–∏.

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

.
‚îú‚îÄ‚îÄ .air.toml                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è hot-reload
‚îú‚îÄ‚îÄ .env                         # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .gitignore                   # Git-–∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ bin/                         # –ë–∏–Ω–∞—Ä–Ω–∏–∫–∏ –∏ —Ç—É–ª–∑—ã, —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ docker-compose
‚îÇ   ‚îú‚îÄ‚îÄ air
‚îÇ   ‚îî‚îÄ‚îÄ wood_post
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ service/
‚îÇ       ‚îî‚îÄ‚îÄ service.go           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ config.go                # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ docker-compose.override.yml # Dev-–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml          # Compose-–æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ Dockerfile                  # –ú–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è —Å–±–æ—Ä–∫–∞ (dev/prod)
‚îú‚îÄ‚îÄ go.mod / go.sum             # –ú–æ–¥—É–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ IMPORTANT_NOTES             # –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ service.go              # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ telegram_bot/
‚îÇ       ‚îú‚îÄ‚îÄ service.go          # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ Telegram-–±–æ—Ç–∞
‚îÇ       ‚îî‚îÄ‚îÄ sessions.go         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ Makefile                    # –°–±–æ—Ä–∫–∞, –º–∏–≥—Ä–∞—Ü–∏–∏, dev-–∫–æ–º–∞–Ω–¥—ã
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îî‚îÄ‚îÄ 20250422150545_init.sql # Goose-–º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ pkg/
‚îÇ   ‚îî‚îÄ‚îÄ log/
‚îÇ       ‚îî‚îÄ‚îÄ log.go              # –ö–∞—Å—Ç–æ–º–Ω—ã–π –ª–æ–≥–≥–µ—Ä —Å —É—Ä–æ–≤–Ω–µ–º –∏ caller
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ store/
‚îÇ   ‚îú‚îÄ‚îÄ schema.dbml             # DBML-—Å—Ö–µ–º–∞ –¥–ª—è dbdiagram.io
‚îÇ   ‚îî‚îÄ‚îÄ service.go              # SQL-–ª–æ–≥–∏–∫–∞ –∏ –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ
‚îî‚îÄ‚îÄ volume/                     # Docker volume –¥–ª—è –±–∞–∑—ã

üõ† –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

Golang 1.23

PostgreSQL (–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)

Air (–≥–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞)

Goose (–º–∏–≥—Ä–∞—Ü–∏–∏)

Squirrel (SQL query builder)

go-telegram-bot-api (v5)

‚öôÔ∏è –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

Telegram Bot:

–ö–æ–º–∞–Ω–¥–∞ /start —Å–æ–∑–¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –µ–≥–æ –µ—â—ë –Ω–µ—Ç.

–ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç "–ø–æ—Ä—Ç—Ñ–µ–ª—å".

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ UserSession.

–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ç–∞–π–º–µ—Ä—É (30 –º–∏–Ω –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏).

–û—Ç–ø—Ä–∞–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, —É–¥–∞–ª—è–µ–º—ã—Ö —á–µ—Ä–µ–∑ sendTemporaryMessage().

Store:

CreateUserIfNotExists, UserExists –∏ –¥—Ä—É–≥–∏–µ CRUD-–∑–∞–ø—Ä–æ—Å—ã.

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω—ã —á–µ—Ä–µ–∑ squirrel.

–ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é (—á–µ—Ä–µ–∑ make db-migrate).

Sessions:

–•—Ä–∞–Ω—è—Ç—Å—è –≤ SessionManager –≤–Ω—É—Ç—Ä–∏ Telegram-—Å–µ—Ä–≤–∏—Å–∞.

–ü–æ–ª—è: State, TempData, LastUpdated.

–§–æ–Ω–æ–≤–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –æ—á–∏—â–∞–µ—Ç —Å–µ—Å—Å–∏–∏ –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç.

üîÅ –ì–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Air + .air.toml + make watch. –ö–æ–º–∞–Ω–¥–∞:

make watch

üß™ –ö–æ–º–∞–Ω–¥—ã Makefile

make build-service    # –°–æ–±—Ä–∞—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫ wood_post
make watch            # –ó–∞–ø—É—Å–∫ —Å Air (dev)
make db-migrate       # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Goose
make install-tools    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ air, goose –∏ –ø—Ä–æ—á–∏—Ö —Ç—É–ª–æ–≤

üìã –ó–∞–º–µ—Ç–∫–∏

–ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äî —Ç–æ–ª—å–∫–æ —Ä—É–∫–∞–º–∏.

–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É webhook.

Vault –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –ø–æ–¥–∫–ª—é—á–∏–º –ø–æ–∑–∂–µ.

üìå –ü—Ä–∏–º–µ—Ä –ë–î –≤ DBML

–ù–∞—Ö–æ–¥–∏—Ç—Å—è –≤ store/schema.dbml. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ https://dbdiagram.io.

üìì –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π log –∏–∑ pkg/log/log.go —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:

–£—Ä–æ–≤–Ω–µ–π Info, Warn, Error, Debug

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è runtime.Caller –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ç–æ—á–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –≤—ã–∑–æ–≤–∞

–ü—Ä–∏–º–µ—Ä:

log.Infof("user %d created portfolio %q", userID, name)

‚úÖ To Do

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ CSV

–ì—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∞–∫—Ç–∏–≤–∞–º

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ default-–ø–æ—Ä—Ç—Ñ–µ–ª—è

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Vault

CI/CD + –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏